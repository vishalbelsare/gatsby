---
date: "2023-12-18"
version: "5.13.0"
title: "v5.13 Release Notes"
---

Welcome to `gatsby@5.13.0` release (December 2023 #1)

Key highlight of this release:

- [Custom Image and File CDN URL generators](#custom-image-and-file-cdn-url-generators)

Also check out [notable bugfixes](#notable-bugfixes--improvements).

**Bleeding Edge:** Want to try new features as soon as possible? Install `gatsby@next` and let us know if you have any [issues](https://github.com/gatsbyjs/gatsby/issues).

[Previous release notes](/docs/reference/release-notes/v5.12)

[Full changelog][full-changelog]

---

## Custom Image and File CDN URL generators

[`gatsby@4.10.0` introduced Image CDN](/docs/reference/release-notes/v4.10/#image-cdn) capability for Gatsby users. For best build performance, it requires a deployed site to handle image transformations at request time instead of at build time. Until now, handling those requests required supporting the specific URL format produced by Gatsby. With this release, we're introducing support for custom URL generators that allow you to use your own URL format. This makes it easier to integrate with existing site deployment platforms that offer Image CDN capabilities or to use self-managed Image CDNs by providing a way to generate URLs that are already in format expected by your CDN.

Adapter API now offers ability to provide custom URL generators modules for both Image CDN (`gatsbyImage`) and File CDN (`publicUrl`). `gatsby-adapter-netlify@1.1.0` is optionally using this feature to make use of [Netlify's Image CDN](https://docs.netlify.com/image-cdn/overview/). Be sure to check [Netlify Adapter documentation](https://www.npmjs.com/package/gatsby-adapter-netlify#imagecdn) for more information on how to enable and configure it.

Image and File CDN now use remote URLs for source files. It is recommended to only allow certain remote URLs to be used to prevent abuse. This version also introduced a way for source plugins that support Image and File CDN to declare a list of allowed remote URLs with the newly added [`addRemoteFileAllowedUrl` action](/docs/reference/config-files/actions/#addRemoteFileAllowedUrl). Adapters will receive a list of allowed URLs to automatically configure or guide users on how to configure their deployment to allow those remote URLs.

The latest versions of Gatsby plugins - `gatsby-source-contentful` (`v8.13.0`), `gatsby-source-drupal` (`v6.13.0`), and `gatsby-source-wordpress` (`v7.13.0`) - now incorporate a new action to specify allowed remote URLs. Additionally, `gatsby-adapter-netlify` (`v1.1.0`) leverages this update to assist in configuring Netlify's Image CDN. It ensures these remote URLs are permitted and provides informative messages if your `netlify.toml` file requires adjustments to support these URLs.

If you are interested in using custom URL generators in your adapter, check the source code of `gatsby-adapter-netlify` for a reference implementation:

- [registering custom URL generators modules](https://github.com/gatsbyjs/gatsby/blob/4a780fbac717b1df337f156e2ac4b2da6478106b/packages/gatsby-adapter-netlify/src/index.ts#L159-L164)
- [custom Image CDN URL generator](https://github.com/gatsbyjs/gatsby/blob/4a780fbac717b1df337f156e2ac4b2da6478106b/packages/gatsby-adapter-netlify/src/image-cdn-url-generator.ts)
- [custom File CDN URL generator](https://github.com/gatsbyjs/gatsby/blob/4a780fbac717b1df337f156e2ac4b2da6478106b/packages/gatsby-adapter-netlify/src/file-cdn-url-generator.ts)

## Notable bugfixes & improvements

- `gatsby`:
  - Disable prettier formatting for autogenerated GraphQL Types, via [PR #38453](https://github.com/gatsbyjs/gatsby/pull/38453)
  - Fix API Functions compilation on Windows, via [PR #38489](https://github.com/gatsbyjs/gatsby/pull/38489)
  - Fix segmentation faults in DSG/SSR function when mounted in read-only directory, via [PR #38631](https://github.com/gatsbyjs/gatsby/pull/38631)
  - Detect when LMDB prebuilt binaries are not used and attempt to use prebuilt binaries in SSR/DSG engine to avoid runtime issues if functions environment is incompatible with binary built from source, via [PR #38691](https://github.com/gatsbyjs/gatsby/pull/38691)
  - Add `headerRoutes` to Adapters API to be able to use set of rules for setting headers instead of setting headers for each path individually, via [PR #38644](https://github.com/gatsbyjs/gatsby/pull/38644)
  - Handle Path Prefixed paths in Adapter's Route Manifest, via [PR #38666](https://github.com/gatsbyjs/gatsby/pull/38666)
- `gatsby-adapter-netlify`:
  - Support Path Prefix and Trailing Slash options, via [PR #38666](https://github.com/gatsbyjs/gatsby/pull/38666)
  - Support `force` and `conditions` redirect parameters, via [PR #38657](https://github.com/gatsbyjs/gatsby/pull/38657)
  - Use `headerRoutes` if available to produce smaller `_headers` file, via [PR #38652](https://github.com/gatsbyjs/gatsby/pull/38652)
- `gatsby-source-contentful`:
  - Properly configure sync options for incremental data update, via [PR #38468](https://github.com/gatsbyjs/gatsby/pull/38468)
  - Fix handling of "Long text" fields during incremental data updata, via [PR #38728](https://github.com/gatsbyjs/gatsby/pull/38728)
- Multiple packages using `sharp` (image processing library):
  - Address security vulnerability in used version of `sharp` by upgrading, via [PR #38374](https://github.com/gatsbyjs/gatsby/pull/38374)

## Contributors

A big **Thank You** to [our community who contributed][full-changelog] to this release ðŸ’œ

- [0o001](https://github.com/0o001): fix: GatsbyNodeAPI types [PR #38461](https://github.com/gatsbyjs/gatsby/pull/38461)
- [CountryTk](https://github.com/CountryTk): feat(gatsby-plugin-google-tagmanager): add self hosted path option [PR #38731](https://github.com/gatsbyjs/gatsby/pull/38731)
- [Hrishikesh-K](https://github.com/Hrishikesh-K): chore: added logging for cache handling [PR #38654](https://github.com/gatsbyjs/gatsby/pull/38654)
- [axe312ger](https://github.com/axe312ger): fix: contentful delta updates [PR #38468](https://github.com/gatsbyjs/gatsby/pull/38468)
- [cunhacf](https://github.com/cunhacf): fix(gatsby): support multiple instances of same variable in gatsbyImage placeholderUrl [PR #38626](https://github.com/gatsbyjs/gatsby/pull/38626)
- [derrysucari](https://github.com/derrysucari): fix(gatsby): disable prettier for results of graphql typegen [PR #38453](https://github.com/gatsbyjs/gatsby/pull/38453)
- [dhayab](https://github.com/dhayab): chore(docs): update algolia guide [PR #38458](https://github.com/gatsbyjs/gatsby/pull/38458)
- [holtzy](https://github.com/holtzy): docs: Fix tiny typo (1 letter) [PR #38463](https://github.com/gatsbyjs/gatsby/pull/38463)
- [joshuajames](https://github.com/joshuajames): chore(docs): update README.md [PR #38495](https://github.com/gatsbyjs/gatsby/pull/38495)
- [jouni](https://github.com/jouni): docs: update `npm-cache` directory location [PR #38373](https://github.com/gatsbyjs/gatsby/pull/38373)
- [kaltepeter](https://github.com/kaltepeter): chore(docs): fix broken eslint doc link in graphql-typegen docs [PR #38367](https://github.com/gatsbyjs/gatsby/pull/38367)
- [laurenskling](https://github.com/laurenskling): docs: Update node-model.js to new sort syntax [PR #38515](https://github.com/gatsbyjs/gatsby/pull/38515)
- [lovell](https://github.com/lovell): chore(deps): upgrade sharp to latest v0.32.6 [PR #38374](https://github.com/gatsbyjs/gatsby/pull/38374)
- [palmiak](https://github.com/palmiak): docs: Changes the name of one of the service [PR #38650](https://github.com/gatsbyjs/gatsby/pull/38650)
- [stephan1echung](https://github.com/stephan1echung)
  - Update gatsby-cloud-plugin README [PR #38479](https://github.com/gatsbyjs/gatsby/pull/38479)
  - Update gatsby-contentful-plugin README [PR #38480](https://github.com/gatsbyjs/gatsby/pull/38480)

[full-changelog]: https://github.com/gatsbyjs/gatsby/compare/gatsby@5.13.0-next.0...gatsby@5.13.0
